<div ng-controller="Umbraco.Editors.Content.SendToTranslateController as vm" ng-cloak>

    <div class="umb-dialog-body with-footer">

        <div class="umb-pane">

            <umb-load-indicator ng-show="vm.loading"></umb-load-indicator>

            <div ng-if="!vm.loading">
                <div class="alert alert-error" ng-if="vm.translators.length === 0">
                    No translator users found. Please create a translator user before you start sending content to translation
                </div>

                <div ng-if="vm.translators.length !== 0">
                    <h5>Send the page '{{ dialogOptions.currentNode.name }}' to translation</h5>

                    <div style="margin-bottom: 15px;">
                        <label class="bold db">Translator</label>
                        <select class="input-block-level" ng-model="vm.form.translator" ng-options="translator.id as translator.name for translator in vm.translators" ng-change="vm.updateButtonDisabledState()">
                            <option value="" hidden>-- Choose --</option>
                        </select>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label class="bold db">Translate to</label>
                        <select class="input-block-level" ng-model="vm.form.language" ng-options="language.isoCode as language.name for language in vm.languages" ng-change="vm.updateButtonDisabledState()">
                            <option value="" hidden>-- Choose --</option>
                        </select>
                    </div>

                    <div style="margin-bottom: 15px;" ng-show="dialogOptions.currentNode.hasChildren === true">
                        <label class="bold db">Include subpages</label>
                        <label class="flex">
                            <input class="mt0" style="margin-right:10px;" type="checkbox" ng-model="vm.form.includeSubpages" />
                            Yes, include subpages
                        </label>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label class="bold db">Comment</label>
                        <textarea ng-model="vm.form.comment" style="width:100%; resize:none; min-height:80px;"></textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <ng-container ng-if=" vm.loading === false">
        <div class="umb-dialog-footer btn-toolbar umb-btn-toolbar" ng-if="vm.translators.length !== 0">
            <a class="btn btn-link" ng-click="nav.hideDialog()">
                <localize key="general_cancel">Cancel</localize>
            </a>

            <umb-button type="button"
                        action="vm.sendToTranslation()"
                        state="vm.sendToTranslationButtonState"
                        button-style="success"
                        label-key="buttons_save"
                        disabled="!vm.buttonEnabled">
            </umb-button>
        </div>

        <div class="umb-dialog-footer btn-toolbar umb-btn-toolbar" ng-if="vm.translators.length === 0">
            <button class="btn btn-info" ng-click="nav.hideDialog(true)">
                <localize key="buttons_somethingElse">Do something else</localize>
            </button>
        </div>
    </ng-container>

</div>
